Luego de la modificación en la función, el menú abre y cierra (solamente) al hacer click en alguno de los links. Hay que pensar la función para que pueda cerrar presionando fuera de la lista desplegable.
Indagar por el lado del tamaño del div. En la prueba el div ocupa toda la pantalla....
